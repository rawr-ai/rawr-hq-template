{
  "criterion": "d4-dedupe-scan",
  "triggerRule": "heavy middleware chain depth >= 3 missing explicit context-cached dedupe marker",
  "triggered": false,
  "heavyChainDepthThreshold": 3,
  "rpcHandlerCount": 2,
  "stepCoverage": {
    "authGate": 3,
    "contextFactory": 4,
    "markerAssertion": 2,
    "contextCreatedHook": 4,
    "handlerDispatch": 2
  },
  "measuredRpcMiddlewareChainDepth": 5,
  "heavyChainDepthCriterionMet": true,
  "missingExplicitMarker": false,
  "summary": "No dedupe-marker drift detected in heavy D1-owned middleware chain.",
  "checks": [
    {
      "id": "context-marker-surface",
      "message": "context.ts exports RAWR_MIDDLEWARE_DEDUPE_MARKERS",
      "pass": true
    },
    {
      "id": "context-rpc-auth-marker",
      "message": "context.ts defines RPC_AUTHORIZATION_DECISION marker",
      "pass": true
    },
    {
      "id": "context-marker-cache",
      "message": "context.ts keeps request-scoped marker cache",
      "pass": true
    },
    {
      "id": "orpc-dedupe-evaluation",
      "message": "orpc.ts evaluates RPC auth through request-scoped dedupe",
      "pass": true
    },
    {
      "id": "orpc-marker-assertions",
      "message": "orpc.ts asserts dedupe marker in both /rpc handlers",
      "pass": true
    },
    {
      "id": "runtime-drift-test",
      "message": "middleware-dedupe test keeps structural drift hard-fail",
      "pass": true
    }
  ],
  "failedCheckIds": [],
  "failedMarkerCheckIds": []
}
